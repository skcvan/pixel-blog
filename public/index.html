<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
<head>
	<meta name="generator" content="Hugo 0.152.2"><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Casey&#39;s Pixel Log</title>
    <link rel="icon" type="image/png" href="/favicon.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="/css/styles.css" rel="stylesheet">
</head>
</head>
<body>
  <header>
    <header class="py-6 px-6">
    <div class="flex justify-start items-center">
    
    <nav>
      <ul class="flex list-none m-0 p-0 gap-4">
      <li>
        <a class="text-sm" href="/posts">
            文章
        </a>
      </li>
      <li>
        <a class="text-sm" href="/">
            首页
        </a>
      </li>
      </ul>
    </nav>
</div>
</header>
  </header>
  <div class="flex justify-center">
    <img src="/border-home1.png" alt="border-home1">
  </div>
  <main>
    <div class="mx-auto w-full max-w-4xl px-4 py-6">
    

<div class="grid lg:grid-cols-2 gap-4">
	<div class="not-prose flex cursor-default flex-col space-y-4 rounded-lg border border-white p-4">
		<img src="/portrait.png" alt="Portrait" class="w-[423px] h-[192px]">
		<div>
			<strong>Casey</strong>
			欢迎来到我的博客,这是基于Hugo和Tailwind搭建而成
		</div>
	</div>
	<div class="grid lg:grid-rows-2 gap-4">
		<div class="not-prose flex cursor-default flex-col space-y-2 rounded-lg border border-white p-6">
			<img src="/status.png" alt="Status" class="self-start">
			<div>go语言学习中</div>
		</div>
		<div class="not-prose flex cursor-default flex-col space-y-2 rounded-lg border border-white p-6">
			<img src="/watching.png" alt="Watching" class="self-start">
			
				<p class="underline">
					<a href="https://gohugo.io/">
					Learning Hugo
					</a>
				</p>
			
		</div>
	</div>
</div>


    </div>
  </main>
  
  <div class="mx-auto w-full max-w-4xl px-4 py-2 mt-8">
    <img src="/recent-work.png" alt="recent-work">
  </div>
  <div class="mx-auto w-full max-w-4xl px-4 py-4">
    
    
    
      
    
    
    
    
    
      
    
      
    
      
    
      
    
      
    
      
    
    
    
    
      
      
    
      
      
        
          
          
        
      
    
      
      
        
          
          
        
      
    
    
    
    
    
    
    <div class="grid lg:grid-cols-2 gap-4">
      
        
          
          <div class="not-prose flex cursor-default flex-col space-y-4 rounded-lg border border-white p-6 transition-all duration-150 hover:border-pink-300">
            <h3 class="font-semibold flex items-center gap-2">
              
              命令行任务管理工具（CLI To-Do List）
            </h3>
            
              <p><em><h2 id="功能需求">功能需求</h2>
<p> 支持<code>add</code>（添加任务）、<code>list</code>（列出任务）、<code>done</code>（标记完成）。</p>
<h2 id="设计思路">设计思路</h2>
<ol>
<li>通过os.Args来读取并解析命令行参数</li>
<li>读取os.Args[1]然后通过swtich分发给add/list/done</li>
<li>核心函数loadTasks()和saveTasks()分别加载和保存任务（数据存储在json文件中）</li>
</ol>
<h2 id="数据模型">数据模型</h2>
<p>定义Task结构体，包含Description（任务内容），CreatedAt（创建时间），IsDone（是否完成）</p>
<h2 id="具体流程">具体流程</h2>
<h3 id="1首先定义结构体">1.首先定义结构体</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">Task</span> <span style="color:#a6e22e">struct</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Description</span> <span style="color:#a6e22e">string</span> <span style="color:#e6db74">`json:&#34;description&#34;`</span> <span style="color:#75715e">// 任务描述
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">CreatedAt</span>   <span style="color:#a6e22e">string</span> <span style="color:#e6db74">`json:&#34;createdAt&#34;`</span>   <span style="color:#75715e">// 创建时间
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">IsDone</span>      <span style="color:#a6e22e">bool</span>   <span style="color:#e6db74">`json:&#34;isDone&#34;`</span>      <span style="color:#75715e">// 是否完成
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span></code></pre></div><p>后面的json字段是为了添加映射，这里需要补充json序列化和反序列化的知识，</p>
<p>在 Go 语言中，进行 JSON 操作时，结构体的<strong>字段名</strong>需要满足 JSON 的规范，这涉及到 <strong>结构体标签（Struct Tags）</strong>。</p>
<ul>
<li><strong>问题：</strong> 你的结构体字段名使用了 Go 语言惯用的<strong>大驼峰命名</strong>（如 <code>Desription</code>）。但在 JSON 文件中，通用惯例是使用 <strong>小写或蛇形命名</strong>（如 <code>description</code>）。</li>
<li><strong>解决方案：</strong> 我们需要使用 <code>json:&quot;fieldName&quot;</code> 标签来指导 <code>encoding/json</code> 包进行正确的映射。</li>
</ul>
<h3 id="2处理命令行参数以及命令行分发代码">2.处理命令行参数以及命令行分发代码</h3>
<ul>
<li><code>os.Args[0]</code>：永远是程序的名称（例如：<code>./todo</code>）</li>
<li><code>os.Args[1]</code>：是第一个参数，即命令（例如：<code>add</code>）</li>
<li><code>os.Args[2:]</code>：是命令后面的所有参数</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="color:#a6e22e">func</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">//检查参数长度
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">len</span>(<span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">Args</span>) <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">2</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;用法: todo &lt;命令&gt; [参数]&#34;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;命令: add, list, done&#34;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> 
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">command</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">Args</span>[<span style="color:#ae81ff">1</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 使用 switch 结构来分发命令
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">switch</span> <span style="color:#a6e22e">command</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#34;add&#34;</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// ... 添加任务逻辑
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#34;list&#34;</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// ... 列出任务逻辑
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#34;done&#34;</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// ... 标记完成逻辑
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">default</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;未知命令: %s\n&#34;</span>, <span style="color:#a6e22e">command</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="3实现核心函数loadtasks和savetasks">3.实现核心函数loadTasks()和saveTasks()</h3>
<p>这部分涉及很多io操作的函数，以及错误处理的方式和序列化的知识，知识点总结如下</p></em></p>
            
            <a href="/posts/%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%BB%BB%E5%8A%A1%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7/" class="self-start text-sm text-white underline">Read more →</a>
          </div>
        
      
        
          
          <div class="not-prose flex cursor-default flex-col space-y-4 rounded-lg border border-white p-6 transition-all duration-150 hover:border-pink-300">
            <h3 class="font-semibold flex items-center gap-2">
              <img src="/contribute.png" alt="">
              external example
            </h3>
            
              <p><em>Teaser for your external link</em></p>
            
            <a href="https://gohugo.io/" target="_blank" rel="noopener noreferrer" class="self-start text-sm text-white underline">Read more →</a>
          </div>
        
      
    </div>
  </div>
  
  <div class="flex justify-center">
    <img src="/border-home1.png" alt="border-home1">
  </div>
  <footer>
    <p class="text-xs px-6 py-6">Made with ୨ <a href="https://github.com/danapixels/digio-theme" target="_blank" rel="noopener noreferrer">Digio</a> ୧ .</p>

  </footer>
</body>
</html>
